<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>나의 퀴즈</title>
</head>
<body>

<h2>나의 퀴즈</h2>
<ul id="quizList"></ul>

<script>
  const token = localStorage.getItem('token');
  if (!token) {
    alert('로그인이 필요합니다.');
    location.href = '/login.html';
  }

  fetch('/quiz/my-list', {
    headers: {
      'Authorization': `Bearer ${token}`
    }
  })
  .then(res => res.json())
  .then(data => {
    const ul = document.getElementById('quizList');
    if (data.length === 0) {
      ul.innerHTML = '<li>퀴즈가 없습니다.</li>';
      return;
    }

    data.forEach(quiz => {
      const li = document.createElement('li');
      const link = document.createElement('a');
      link.href = `/quiz/edit.html?quizId=${quiz._id}`;
      link.textContent = `${quiz.title} (${quiz.questions.length}문제${quiz.isComplete ? ', 완료됨' : ', 작성중'})`;
      li.appendChild(link);
      ul.appendChild(li);
    });
  })
  .catch(err => {
    alert('퀴즈 목록을 불러올 수 없습니다.');
    console.error(err);
  });
</script>
    
</body>
</html>